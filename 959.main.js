"use strict";(self.webpackChunkscan_react=self.webpackChunkscan_react||[]).push([[959],{1959:(e,n,t)=>{t.r(n),t.d(n,{default:()=>W});var r=t(8931),i=t(3757),a=t(3244),s=t(6105),l=t(5843),o=t(409),c=t(4848);function u(e){var n=e.children;return(0,l.A)().isLargeDesktop?n:(0,c.jsx)(o.A,{items:[{key:1,label:"Дополнительные параметры",children:n}],ghost:!0})}var d=[{label:"Признак максимальной полноты",value:"maxFullness"},{label:"Упоминания в бизнес-контексте",value:"inBusinessNews"},{label:"Главная роль в публикации",value:"onlyMainRole "},{label:"Публикации только с риск-факторами",value:"onlyWithRiskFactors"},{label:"Включать технические новости рынков",value:"isTechNews"},{label:"Включать анонсы и календари",value:"isAnnouncement"},{label:"Включать сводки новостей",value:"isDigest"}],m=[{value:"any",label:"Любой"},{value:"negative",label:"Негативный"},{value:"positive",label:"Позитивный"}];var h,x,p=t(7864),f=t(1250);function b(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var g,v,y=(0,f.Ay)(p.A)(h||(h=b(["\n  padding: 20px 44px 30px;\n  max-width: 872px;\n\n  .ant-btn {\n    width: 365px;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 20px !important;\n  }\n\n  .ant-form-item-label label {\n    font-size: 20px;\n  }\n\n  .ant-form-item-required {\n    &::before {\n      display: none !important;\n    }\n\n    &::after {\n      content: '*' !important;\n      visibility: visible !important;\n    }\n  }\n\n  @media (max-width: 1200px) {\n    max-width: 500px;\n  }\n\n  @media (max-width: 900px) {\n    max-width: none;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n\n  @media (max-width: 768px) {\n\t\tpadding: 15px 10px 20px;\n\n    .ant-picker,\n    .ant-btn {\n      width: 100%;\n    }\n  }\n\n  @media (max-width: 576px) {\n    .ant-form-item {\n      width: 100%;\n    }\n  }\n"]))),j=f.Ay.p(x||(x=b(["\n  min-width: 305px;\n  color: var(--gray-primary);\n"]))),A=t(5664),w=function(e){"Backspace"!==e.key&&(/[0-9]/.test(e.key)||e.preventDefault())},k=t(4648),S=t(1052),D=t(7229),F=t(362),I=t(6715),O=t(2697),T=t(9694),z=t(6540),P=t(5788);function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,s,l=[],o=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);o=!0);}catch(e){c=!0,i=e}finally{try{if(!o&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return E(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function R(){var e=(0,P.Zp)(),n=((0,A.j)(),(0,l.A)()),t=n.isLargeDesktop,r=n.isMobile,i=q(p.A.useForm(),1)[0],a=q((0,z.useState)(!1),2),o=a[0],h=a[1],x=q((0,z.useState)(!1),2),f=x[0],b=x[1],g=q((0,z.useState)(!1),2),v=g[0],E=g[1],R=q((0,s.Wq)({fixedCacheKey:"histograms"}),2),M=R[0],N=R[1],C=N.isSuccess,B=N.isLoading,W=q((0,s.P7)({fixedCacheKey:"ids"}),2),L=W[0],G=W[1],$=G.isSuccess,K=G.isLoading,U=p.A.useWatch([],i);return(0,z.useEffect)((function(){v&&C&&$&&e(k.x.RESULTS)}),[v,C,$]),(0,z.useEffect)((function(){i.validateFields({validateOnly:!0}).then((function(){return b(!0)})).catch((function(){return b(!1)}))}),[i,U]),(0,c.jsx)(y,{layout:"vertical",onFinish:function(e){var n=function(e){var n=e.startDate,t=e.endDate,r=e.inn,i=e.tonality,a=e.limit,s=e.maxFullness,l=void 0!==s&&s,o=e.inBusinessNews,c=void 0!==o&&o,u=e.onlyMainRole,d=void 0!==u&&u,m=e.onlyWithRiskFactors,h=void 0!==m&&m,x=e.excludeTechNews,p=void 0!==x&&x,f=e.excludeAnnouncements,b=void 0!==f&&f,g=e.excludeDigests,v={attributeFilters:{excludeAnnouncements:b,excludeDigests:void 0!==g&&g,excludeTechNews:p},histogramTypes:["totalDocuments","riskFactors"],intervalType:"month",issueDateInterval:{endDate:t,startDate:n},limit:a,searchArea:{excludedSourceGroups:[],excludedSources:[],includedSourceGroups:[],includedSources:[]},searchContext:{targetSearchEntitiesContext:{onlyMainRole:d,onlyWithRiskFactors:h,riskFactors:{and:[],not:[],or:[]},targetSearchEntities:[{entityId:null,inBusinessNews:c,inn:r,maxFullness:l,sparkId:null,type:"company"}],themes:{and:[],not:[],or:[]},tonality:i},themesFilter:{and:[],not:[],or:[]}},similarMode:"duplicates",sortDirectionType:"desc",sortType:"issueDate"};return sessionStorage.setItem("histogramsBody",JSON.stringify(v)),v}(e);h(!0),E(!0),Promise.all([M(n),L(n)]).finally((function(){return h(!1)}))},form:i,initialValues:{tonality:"any"},children:(0,c.jsxs)(S.A,{gap:10,justify:"space-between",vertical:!t,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(p.A.Item,{label:"ИНН компании",name:"inn",rules:[{required:!0,message:"Обязательное поле"},{validator:function(e,n){return n?/^\d+$/.test(n)?/^\d{10}$/.test(n)||/^\d{12}$/.test(n)?Promise.resolve():Promise.reject(new Error("ИНН должен содержать 10 или 12 цифр")):Promise.reject(new Error("Введите корректные данные")):Promise.resolve()}}],children:(0,c.jsx)(D.A,{size:"large"})}),(0,c.jsx)(p.A.Item,{label:"Тональность",name:"tonality",children:(0,c.jsx)(F.A,{size:"large",options:m})}),(0,c.jsx)(p.A.Item,{label:"Количество документов в выдаче",name:"limit",rules:[{required:!0,message:"Обязательное поле"}],children:(0,c.jsx)(D.A,{onKeyDown:w,size:"large"})}),(0,c.jsxs)(S.A,{gap:20,vertical:r,align:"flex-end",children:[(0,c.jsx)(p.A.Item,{label:"Диапазон поиска",name:"startDate",rules:[{required:!0,message:"Обязательное поле"}],children:(0,c.jsx)(I.A,{size:"large"})}),(0,c.jsx)(p.A.Item,{name:"endDate",rules:[{required:!0,message:"Обязательное поле"}],children:(0,c.jsx)(I.A,{size:"large"})})]})]}),(0,c.jsxs)(S.A,{vertical:!0,align:t?"flex-end":"flex-start",children:[(0,c.jsx)(u,{children:(0,c.jsx)(S.A,{vertical:!0,children:d.map((function(e){return(0,c.jsx)(p.A.Item,{name:e.value,valuePropName:"checked",style:{marginBottom:15},children:(0,c.jsx)(O.A,{children:e.label})},e.value)}))})}),(0,c.jsx)(T.Ay,{htmlType:"submit",size:"large",disabled:!f||o,loading:K||B,style:{marginTop:"auto"},children:"Поиск"}),(0,c.jsx)(j,{children:"* Обязательные к заполнению поля"})]})]})})}function M(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var N=f.Ay.section(g||(g=M(["\n  background: url('./images/search-page-back.svg') no-repeat bottom right;\n\n  @media (max-width: 900px) {\n    padding-bottom: calc(100vw * 471 / 435);\n    background-position: bottom;\n    background-size: contain;\n  }\n"]))),C=f.Ay.div(v||(v=M(["\n  margin-bottom: 47px;\n\n  background:\n    url('./icons/Folders.svg') no-repeat right 80%,\n    url('./icons/Document.svg') no-repeat 75% bottom;\n\n  @media (max-width: 768px) {\n    background: url('./icons/Document.svg') no-repeat right 50% / 58px auto;\n  }\n"]))),B=t(6434);function W(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(N,{children:(0,c.jsxs)(B.m,{children:[(0,c.jsxs)(C,{children:[(0,c.jsx)(r.A,{children:(0,c.jsxs)(a.A,{level:3,mb:25,children:["Найдите необходимые",(0,c.jsx)("br",{})," данные в пару кликов."]})}),(0,c.jsx)(r.A,{delay:.3,children:(0,c.jsxs)(i.A,{children:["Задайте параметры поиска. ",(0,c.jsx)("br",{})," Чем больше заполните, тем точнее поиск"]})})]}),(0,c.jsx)(r.A,{delay:.6,threshold:.1,children:(0,c.jsx)(R,{})})]})})})}},6105:(e,n,t)=>{t.d(n,{P7:()=>s,Wq:()=>l});var r=t(3049),i="objectsearch",a=r.U.injectEndpoints({endpoints:function(e){return{getIds:e.mutation({query:function(e){return{url:i,method:"POST",body:e}},transformResponse:function(e){return e.items}}),getHistograms:e.mutation({query:function(e){return{url:"".concat(i,"/histograms"),method:"POST",body:e}},transformResponse:function(e){return e.data}})}}}),s=a.useGetIdsMutation,l=a.useGetHistogramsMutation}}]);