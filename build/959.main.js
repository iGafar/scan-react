"use strict";(self.webpackChunkscan_react=self.webpackChunkscan_react||[]).push([[959],{1959:(e,n,t)=>{t.r(n),t.d(n,{default:()=>B});var r=t(3757),i=t(3244),a=t(6105),s=t(5843),o=t(409),l=t(4848);function u(e){var n=e.children;return(0,s.A)().isLargeDesktop?n:(0,l.jsx)(o.A,{items:[{key:1,label:"Дополнительные параметры",children:n}],ghost:!0})}var c=[{label:"Признак максимальной полноты",value:"maxFullness"},{label:"Упоминания в бизнес-контексте",value:"inBusinessNews"},{label:"Главная роль в публикации",value:"onlyMainRole "},{label:"Публикации только с риск-факторами",value:"onlyWithRiskFactors"},{label:"Включать технические новости рынков",value:"isTechNews"},{label:"Включать анонсы и календари",value:"isAnnouncement"},{label:"Включать сводки новостей",value:"isDigest"}],d=[{value:"any",label:"Любой"},{value:"negative",label:"Негативный"},{value:"positive",label:"Позитивный"}];var m,h,x=t(7864),f=t(1250);function p(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var v,b,g=(0,f.Ay)(x.A)(m||(m=p(["\n  padding: 20px 44px 30px;\n  max-width: 872px;\n\n  .ant-btn {\n    width: 365px;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 20px !important;\n  }\n\n  .ant-form-item-label label {\n    font-size: 20px;\n  }\n\n  .ant-form-item-required {\n    &::before {\n      display: none !important;\n    }\n\n    &::after {\n      content: '*' !important;\n      visibility: visible !important;\n    }\n  }\n\n  @media (max-width: 1200px) {\n    max-width: 500px;\n  }\n\n  @media (max-width: 900px) {\n    max-width: none;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n\n  @media (max-width: 768px) {\n    .ant-picker,\n    .ant-btn {\n      width: 100%;\n    }\n  }\n\n  @media (max-width: 576px) {\n    .ant-form-item {\n      width: 100%;\n    }\n  }\n"]))),y=f.Ay.p(h||(h=p(["\n  min-width: 305px;\n  color: var(--gray-primary);\n"]))),j=function(e){"Backspace"!==e.key&&(/[0-9]/.test(e.key)||e.preventDefault())},A=t(4648),w=t(1052),k=t(7229),S=t(1796),D=t(6715),I=t(2697),F=t(9694),O=t(6540),T=t(4984);function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(o.push(r.value),o.length!==n);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return P(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function E(){var e=(0,T.Zp)(),n=(0,s.A)(),t=n.isLargeDesktop,r=n.isMobile,i=z(x.A.useForm(),1)[0],o=z((0,O.useState)(!1),2),m=o[0],h=o[1],f=z((0,O.useState)(!1),2),p=f[0],v=f[1],b=z((0,a.Wq)({fixedCacheKey:"histograms"}),2),P=b[0],E=b[1],q=E.isSuccess,R=E.isLoading,M=z((0,a.P7)({fixedCacheKey:"ids"}),2),N=M[0],B=M[1],C=B.isSuccess,W=B.isLoading,L=x.A.useWatch([],i);return(0,O.useEffect)((function(){sessionStorage.removeItem("histogramsBody")}),[]),(0,O.useEffect)((function(){q&&C&&e(A.x.RESULTS)}),[q,C]),(0,O.useEffect)((function(){i.validateFields({validateOnly:!0}).then((function(){return v(!0)})).catch((function(){return v(!1)}))}),[i,L]),(0,l.jsx)(g,{layout:"vertical",onFinish:function(e){var n=function(e){var n=e.startDate,t=e.endDate,r=e.inn,i=e.tonality,a=e.limit,s=e.maxFullness,o=void 0!==s&&s,l=e.inBusinessNews,u=void 0!==l&&l,c=e.onlyMainRole,d=void 0!==c&&c,m=e.onlyWithRiskFactors,h=void 0!==m&&m,x=e.excludeTechNews,f=void 0!==x&&x,p=e.excludeAnnouncements,v=void 0!==p&&p,b=e.excludeDigests,g={attributeFilters:{excludeAnnouncements:v,excludeDigests:void 0!==b&&b,excludeTechNews:f},histogramTypes:["totalDocuments","riskFactors"],intervalType:"month",issueDateInterval:{endDate:t,startDate:n},limit:a,searchArea:{excludedSourceGroups:[],excludedSources:[],includedSourceGroups:[],includedSources:[]},searchContext:{targetSearchEntitiesContext:{onlyMainRole:d,onlyWithRiskFactors:h,riskFactors:{and:[],not:[],or:[]},targetSearchEntities:[{entityId:null,inBusinessNews:u,inn:r,maxFullness:o,sparkId:null,type:"company"}],themes:{and:[],not:[],or:[]},tonality:i},themesFilter:{and:[],not:[],or:[]}},similarMode:"duplicates",sortDirectionType:"desc",sortType:"issueDate"};return sessionStorage.setItem("histogramsBody",JSON.stringify(g)),g}(e);h(!0),Promise.all([P(n),N(n)]).finally((function(){return h(!1)}))},form:i,initialValues:{tonality:"any"},children:(0,l.jsxs)(w.A,{gap:10,justify:"space-between",vertical:!t,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x.A.Item,{label:"ИНН компании",name:"inn",rules:[{required:!0,message:"Обязательное поле"},{validator:function(e,n){return n?/^\d+$/.test(n)?/^\d{10}$/.test(n)||/^\d{12}$/.test(n)?Promise.resolve():Promise.reject(new Error("ИНН должен содержать 10 или 12 цифр")):Promise.reject(new Error("Введите корректные данные")):Promise.resolve()}}],children:(0,l.jsx)(k.A,{size:"large"})}),(0,l.jsx)(x.A.Item,{label:"Тональность",name:"tonality",children:(0,l.jsx)(S.A,{size:"large",options:d})}),(0,l.jsx)(x.A.Item,{label:"Количество документов в выдаче",name:"limit",rules:[{required:!0,message:"Обязательное поле"}],children:(0,l.jsx)(k.A,{onKeyDown:j,size:"large"})}),(0,l.jsxs)(w.A,{gap:20,vertical:r,align:"flex-end",children:[(0,l.jsx)(x.A.Item,{label:"Диапазон поиска",name:"startDate",rules:[{required:!0,message:"Обязательное поле"}],children:(0,l.jsx)(D.A,{size:"large"})}),(0,l.jsx)(x.A.Item,{name:"endDate",rules:[{required:!0,message:"Обязательное поле"}],children:(0,l.jsx)(D.A,{size:"large"})})]})]}),(0,l.jsxs)(w.A,{vertical:!0,align:t?"flex-end":"flex-start",children:[(0,l.jsx)(u,{children:(0,l.jsx)(w.A,{vertical:!0,children:c.map((function(e){return(0,l.jsx)(x.A.Item,{name:e.value,valuePropName:"checked",style:{marginBottom:15},children:(0,l.jsx)(I.A,{children:e.label})},e.value)}))})}),(0,l.jsx)(F.Ay,{htmlType:"submit",size:"large",disabled:!p||m,loading:W||R,style:{marginTop:"auto"},children:"Поиск"}),(0,l.jsx)(y,{children:"* Обязательные к заполнению поля"})]})]})})}function q(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var R=f.Ay.section(v||(v=q(["\n  background: url('./images/search-page-back.svg') no-repeat bottom right;\n\n  @media (max-width: 900px) {\n    padding-bottom: calc(100vw * 471 / 435) px;\n    background-position: bottom;\n    background-size: contain;\n  }\n"]))),M=f.Ay.div(b||(b=q(["\n  margin-bottom: 47px;\n\n  background:\n    url('./icons/Folders.svg') no-repeat right 80%,\n    url('./icons/Document.svg') no-repeat 75% bottom;\n\n  @media (max-width: 768px) {\n    background: url('./icons/Document.svg') no-repeat right 50% / 58px auto;\n  }\n"]))),N=t(6434);function B(){return(0,l.jsx)("main",{children:(0,l.jsx)(R,{children:(0,l.jsxs)(N.m,{children:[(0,l.jsxs)(M,{children:[(0,l.jsxs)(i.A,{level:3,mb:25,children:["Найдите необходимые",(0,l.jsx)("br",{})," данные в пару кликов."]}),(0,l.jsxs)(r.A,{children:["Задайте параметры поиска. ",(0,l.jsx)("br",{})," Чем больше заполните, тем точнее поиск"]})]}),(0,l.jsx)(E,{})]})})})}},6105:(e,n,t)=>{t.d(n,{P7:()=>s,Wq:()=>o});var r=t(3049),i="objectsearch",a=r.U.injectEndpoints({endpoints:function(e){return{getIds:e.mutation({query:function(e){return{url:i,method:"POST",body:e}},transformResponse:function(e){return e.items}}),getHistograms:e.mutation({query:function(e){return{url:"".concat(i,"/histograms"),method:"POST",body:e}},transformResponse:function(e){return e.data}})}}}),s=a.useGetIdsMutation,o=a.useGetHistogramsMutation}}]);